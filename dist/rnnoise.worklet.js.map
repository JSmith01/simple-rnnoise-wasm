{"version":3,"file":"rnnoise.worklet.js","sources":["webpack://simple-rnnoise-wasm/./src/worklet.js"],"sourcesContent":["{\r\n    let instance, heapFloat32;\r\n    registerProcessor(\"rnnoise\", class extends AudioWorkletProcessor {\r\n        constructor(options) {\r\n            super({\r\n                ...options,\r\n                numberOfInputs: 1,\r\n                numberOfOutputs: 1,\r\n                outputChannelCount: [1]\r\n            });\r\n            if (!instance)\r\n                heapFloat32 = new Float32Array((instance = new WebAssembly.Instance(options.processorOptions.module).exports).memory.buffer);\r\n            this.state = instance.newState();\r\n            this.alive = true;\r\n            this.port.onmessage = ({ data: keepalive }) => {\r\n                if (this.alive) {\r\n                    if (keepalive) {\r\n                        this.port.postMessage({ vadProb: instance.getVadProb(this.state) });\r\n                    } else {\r\n                        this.alive = false;\r\n                        instance.deleteState(this.state);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n\r\n        process(input, output, parameters) {\r\n            if (this.alive) {\r\n                heapFloat32.set(input[0][0], instance.getInput(this.state) / 4);\r\n                const o = output[0][0], ptr4 = instance.pipe(this.state, o.length) / 4;\r\n                if (ptr4)\r\n                    o.set(heapFloat32.subarray(ptr4, ptr4 + o.length));\r\n                return true;\r\n            }\r\n        }\r\n    });\r\n}"],"names":["registerProcessor","AudioWorkletProcessor","Float32Array","WebAssembly","o"],"mappings":"AAAA,CACI,IAAI,EAAU,EACdA,kBAAkB,UAAW,cAAcC,sBACvC,YAAY,CAAO,CAAE,CACjB,KAAK,CAAC,CACF,GAAG,CAAO,CACV,eAAgB,EAChB,gBAAiB,EACjB,mBAAoB,CAAC,EAAE,AAC3B,GACI,AAAC,GACD,GAAc,IAAIC,aAAa,AAAC,GAAW,IAAIC,YAAY,QAAQ,CAAC,EAAQ,gBAAgB,CAAC,MAAM,EAAE,OAAO,AAAD,EAAG,MAAM,CAAC,MAAM,GAC/H,IAAI,CAAC,KAAK,CAAG,EAAS,QAAQ,GAC9B,IAAI,CAAC,KAAK,CAAG,GACb,IAAI,CAAC,IAAI,CAAC,SAAS,CAAG,CAAC,CAAE,KAAM,CAAS,CAAE,IAClC,IAAI,CAAC,KAAK,GACN,EACA,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAE,QAAS,EAAS,UAAU,CAAC,IAAI,CAAC,KAAK,CAAE,IAEjE,IAAI,CAAC,KAAK,CAAG,GACb,EAAS,WAAW,CAAC,IAAI,CAAC,KAAK,GAG3C,CACJ,CAEA,QAAQ,CAAK,CAAE,CAAM,CAAE,CAAU,CAAE,CAC/B,GAAI,IAAI,CAAC,KAAK,CAAE,CACZ,EAAY,GAAG,CAAC,CAAK,CAAC,EAAE,CAAC,EAAE,CAAE,EAAS,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAI,GAC7D,IAAMC,EAAI,CAAM,CAAC,EAAE,CAAC,EAAE,CAAE,EAAO,EAAS,IAAI,CAAC,IAAI,CAAC,KAAK,CAAEA,EAAE,MAAM,EAAI,EAGrE,OAFI,GACAA,EAAE,GAAG,CAAC,EAAY,QAAQ,CAAC,EAAM,EAAOA,EAAE,MAAM,GAC7C,EACX,CACJ,CACJ,EACJ"}